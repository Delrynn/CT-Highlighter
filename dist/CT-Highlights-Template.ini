on ^*:TEXT:*:#:{
  var %highlightOffset = <OFFSET>
  var %highlightEnd = <TOTAL_HIGHLIGHTS>
  
  var %i = 0
  while ( %i < 100 ) {
    if ( $nick isin $hget( cases, %i ) ) {
      
      var %caseNum = %i
      var %colorNum = %i + 1
      
      ;catch all for busy times
      if ( %i > %highlightEnd  ) {
        set %colorNum %highlightEnd
      }
      
      %colorNum = %colorNum + %highlightOffset
      var %color $highlight( %colorNum ).color

      
      ;print message
      var %time $asctime($iif($msgstamp, $v1, $ctime), $timestampfmt)
      echo %color -vrlmbf %time # $+ %caseNum $+(<,$nick,>) $1-
      
      ;mid-method returns are the best! - needed to prevent Adi from printing normal message
      halt
    }
    
    inc %i
  }

}